# Стартовый комплект кабины

Леса дляСтартовый комплект кабины [Cockpit](http://www.cockpit-project.org) модульСтартовый комплект кабины.

# Получение и сборка источника

Убедитесь, что у вас есть `npm` (обычно из вашего дистрибутива).
Эти команды проверяют исходный код и встраивают его в каталог `dist /`:

```
git clone https://github.com/cockpit-project/starter-kit.git
cd starter-kit
make
```

# Установка

`make install` компилирует и устанавливает пакет в` / usr / share / cockpit / `.
вспомогательные цели `srpm` и` rpm` создают исходные и двоичные rpms,
соответственно. Оба они используют цель `dist-gzip`, которая используется
сгенерировать дистрибутив тарбола. В режиме `production` исходные файлы
автоматически минимизируется и сжимается. Установите `NODE_ENV = production`, если хотите
продублируйте это поведение.

Для разработки вы обычно хотите запустить свой модуль прямо из Git
дерево. Чтобы сделать это, свяжите это с местоположением, где "кокпит-мост" ищет пакеты:

```
mkdir -p ~/.local/share/cockpit
ln -s `pwd`/dist ~/.local/share/cockpit/starter-kit
```

После изменения кода и повторного запуска make выполните перезагрузку страницы Cockpit в
ваш браузер

Вы также можете использовать
[см. режим](https://webpack.js.org/guides/development/#using-watch-mode) в
автоматически обновлять веб-пакет при каждом изменении кода с

    $ npm run watch

or

    $ make watch

# Бегущий Эслинт

Начальный комплект Cockpit использует [ESLint] (https://eslint.org/) для автоматической проверки
Стиль кода JavaScript в файлах `.js` и` .jsx`.

Линтер выполняется в каждой сборке как предварительный загрузчик веб-пакетов.

Для удобства разработчика ESLint может быть запущен явно:

    $ npm run eslint

Нарушения некоторых правил могут быть устранены автоматически:

    $ npm run eslint:fix

Конфигурацию правил можно найти в файле `.eslintrc.json`.

# Автоматизированное тестирование

Запустите `make check` для сборки RPM, установите его на стандартную тестовую виртуальную машину Cockpit
(centos-7 по умолчанию) и запустите интеграционный тест test / check-application на
Это. Для этого используются браузерные тесты Cockpit на основе Chrome DevTools Protocol, через
Python API абстракция. Обратите внимание, что этот API не гарантированно стабилен, поэтому
если вы столкнулись с ошибками и не хотите настраивать тесты, рассмотрите возможность проверки
Тест кокпита / общий от тега вместо главного (см. `Тест / общий`)
цель в `Makefile`).

После того, как тестовая виртуальная машина подготовлена, вы можете вручную запустить тест без перестроения
ВМ, возможно, с дополнительными опциями для отслеживания и остановки при сбое теста
(для интерактивной отладки):

    TEST_OS=centos-7 test/check-application -tvs

Вы также можете запустить тест для другого образа кокпита, например:

    TEST_OS=fedora-32 make check

# Пользовательская настройка

После клонирования Starter Kit необходимо переименовать файлы, имена пакетов и
ярлыки к названию вашего собственного проекта. Используйте эти команды, чтобы узнать, что
изменение:

    find -iname '*starter*'
    git grep -i starter

#Автоматизированный выпуск

Как только ваш клонированный проект будет готов к выпуску, вы должны подумать об автоматизации
который. [Рецепт освобождения] (https://github.com/cockpit-project/cockpituous/tree/master/release)
стремится полностью автоматизировать релизы проектов для GitHub, Fedora, Ubuntu, COPR, Docker
Хаб и другие места. Намерение состоит в том, что единственный ручной шаг для выпуска
проект должен создать подписанный тег для номера версии; толкая тег
затем запускает GitHub webhook, который вызывает набор сценариев выпуска (на
Инфраструктура КИ кабины).

стартовый комплект включает в себя пример [сценарий выпуска кокпита] (./ cockpituous-release)
это создает tarball и исходный RPM-релиз. Пожалуйста, смотрите выше
кучная документация для деталей.

# дальнейшее чтение

 * [Объявление Starter Kit] (http://cockpit-project.org/blog/cockpit-starter-kit.html)
   сообщение в блоге объясняет обоснование этого проекта.
 * [Документация по развертыванию кабины экипажа и разработчику] (http://cockpit-project.org/guide/latest/)
 * [Сделайте ваш проект легко обнаруживаемым] (http://cockpit-project.org/blog/making-a-cockpit-application.html)
